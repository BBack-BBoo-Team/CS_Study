### 트랜잭션이란

데이터베이스의 상태를 변경시키기 위해 수행하는 작업의 단위
더 이상 쪼갤 수 없는 업무 처리의 최소 단위

데이터베이스 상태 변경의 의미 : DML에 해당하는 SELECT, INSERT, UPDATE, DELETE 등의 명령어에 따른 데이터베이스 내의 데이터 변화

-> 즉, 사용자가 요청한 순간부터 데이터베이스에 도달할 때까지 하나의 과정처럼 묶은 단위가 트랜잭션

물리적 단위가 아닌, 논리적인 단위

-> 여러 개의 작업이 하나의 트랜잭션 안에서 실행될 수 있음
-> 대신 전부 성공하든가, 전부 실패하든가

### 트랜잭션 원칙 (ACID)
- 원자성 (Atomicity)
	- 작업을 더 이상 쪼갤 수 없음
	- 모두 반영되든지, 전혀 반영되지 말든지
- 일관성 (Consistency)
	- 요청한 내용이 성공했을 경우, 데이터베이스에도 그대로 반영되어야 함
- 격리성,독립성 (Isolation)
	- 여러 개의 트랜잭션은 서로 영향을 주어선 안됨.
- 지속성 (Durability)
	- 성공한 트랜잭션에 의해 반영된 정보는 서버가 고장나더라도 영구적이어야 함

### 트랜잭션 커밋과 롤백
- 커밋(Commit)
	- 하나의 트랜잭션이 끝났음을 알려주기 위해 사용하는 연산
	- 최종적인 모든 작업을 데이터베이스에 반영
	- 변경된 내용은 영구 저장
- 롤백(Rollback)
	- 모든 연산을 취소(Undo)
	- 트랜잭션 이 전의 상태로 되돌리는 작업
	
### 트랜잭션의 상태
- 활동: 트랜잭션 실행 중
- 부분완료 : sql문이 수행되고, commit 전
- 완료 : commit까지 모두 완료한 상태
- 실패 : 트랜잭션이 더 이상 정상적으로 진행될 수 없는 상태
- 취소 : 트랜잭션이 취소되고, 실행 이전 데이터로 돌아간 상태

> 트랜잭션 사용 시 주의할 점 <br>
> 트랜잭션의 범위는 최소화하는 것이 좋음. <br>
> 이유는 데이터베이스의 커넥션 개수가 제한적 <br>
> 각 단위마다 커넥션 소유 시간이 길어지고, 여유 커넥션 수가 줄어들면 
> 다음 작업을 수행하기 위해 기다려야 하는 시간이 길어짐.

### 트랜잭션 사용 예제
> mysql 공식 레퍼런스에서 제시하고 있는 트랜잭션 코드
![image](https://github.com/BBack-BBoo-Team/CS_Study/assets/79829085/84038aff-4962-4ad7-b633-ba397216e344)

