## 🔴 트랜잭션

데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 
또는 한꺼번에 모두 수행되어야 할 일련의 연산들을 의미

ex) 강시혁이 이현석에게 100만원을 송금한다.

1. 강시혁의 계좌에서 100만원을 차감한다 : update를 통해 강시혁 잔고 변경
2. 이현석의 계좌에 100만원을 추가한다 : update를 통해 이현석의 잔고 변경
 - 작업단위 : 출금 update + 입금 update
 - 통틀어 하나의 트랜잭션이라고 하며 두개의 쿼리문이 모두 성공적으로 완료되어야만 하나의 작업이 완료되었다고 할 수 있음
   
---

### 🔺 트랜잭션 성질 : ACID

 #### 1. Atomicity : 원자성
- all or nothing
- 트랜잭션 연산은 데이터베이스에 모두 반영되거나 전혀 반영되지 않음
- 트랜잭션 내 모든 명령은 반드시 완벽히 수행되어야 하며 그게 아니라면 전부 취소되어야 함

 #### 2. Consistency : 일관성
- 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환함
- 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야 함

 #### 3. Isoloation  : 격리성/독립성 
- 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행 중에 다른 트랜잭션의 연산이 끼어들 수 없음
- 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행결과를 참조할 수 없음

 #### 4. Durablility : 지속성/영속성 
- 성공적으로 완료된 트랜잭션의 결과는 시스템이 고정나더라도 영구적으로 반영되어야 함

---

### 🔺 트랜잭션 연산 및 상태

#### Commit 연산
- 하나의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 긑났고 데이터베이스가 다시 일관된 상태에 있을 때 이 트랜잭션이 행한 갱신 연산이 완료되었음을 알려주는 연산

#### Rollback 연산
- 하나의 논리적 단위(트랜잭션)이 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때 트랜잭션의 일부가 정상처리 되었다고 해도 원자성을 구현하기 위해 모든 연산을 취소하는 연산

---

### 🔺 트랜잭션 상태

1. 활동 Active : 트랜잭션이 실행중인 상태
2. 실패 Failed : 트랜잭션 실행에 오류가 발생하여 중단된 상태
3. 철회 Aborted : 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
4. 부분 완료 Partially Committed : 트랜잭션의 마지막 연산까지 실행하고 커밋 연산이 실행되기 직전의 상태
5. 완료 Committed : 트랜잭션이 성공적으로 종료되어 커밋연산을 실행한 후의 상태
